-- H2 2.2.224;
;             
CREATE USER IF NOT EXISTS "SA" SALT '63f816127bb7b877' HASH '53c92a7e7b50da20e621c851d626726bed20bc9947ff9c48cbcb34b4bf6a1848' ADMIN;         
CREATE CACHED TABLE "PUBLIC"."KORISNICI"(
    "USER_ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 2) NOT NULL,
    "DATE_CREATED" DATE,
    "EMAIL" CHARACTER VARYING(255),
    "HASH_PASSWORD" CHARACTER VARYING(255),
    "LOCATION" CHARACTER VARYING(255),
    "USERNAME" CHARACTER VARYING(255)
);        
ALTER TABLE "PUBLIC"."KORISNICI" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_F" PRIMARY KEY("USER_ID");               
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.KORISNICI;               
INSERT INTO "PUBLIC"."KORISNICI" VALUES
(1, DATE '2024-11-03', 'user@example.com', 'adads', 'Some Location', 'b');           
CREATE CACHED TABLE "PUBLIC"."USER_VINYLS"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "SLEEVE_CONDITION" ENUM('FAIR', 'GOOD', 'GOOD_PLUS', 'MINT', 'NEAR_MINT', 'POOR', 'VERY_GOOD', 'VERY_GOOD_PLUS'),
    "VINYL_CONDITION" ENUM('FAIR', 'GOOD', 'GOOD_PLUS', 'MINT', 'NEAR_MINT', 'POOR', 'VERY_GOOD', 'VERY_GOOD_PLUS'),
    "USER_ID" BIGINT NOT NULL,
    "VINYL_ID" BIGINT NOT NULL
);        
ALTER TABLE "PUBLIC"."USER_VINYLS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_1" PRIMARY KEY("ID");  
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.USER_VINYLS;             
CREATE CACHED TABLE "PUBLIC"."USER_WISHLIST"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "NOTES" CHARACTER VARYING(255),
    "USER_ID" BIGINT NOT NULL,
    "VINYL_ID" BIGINT NOT NULL
);              
ALTER TABLE "PUBLIC"."USER_WISHLIST" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_B" PRIMARY KEY("ID");
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.USER_WISHLIST;           
CREATE CACHED TABLE "PUBLIC"."VINYLS"(
    "VINYL_ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "ARTIST" CHARACTER VARYING(255),
    "GENRE" ENUM('BLUES', 'CLASSICAL', 'COUNTRY', 'DISCO', 'ELECTRONIC', 'FOLK', 'FUNK', 'HIP_HOP', 'INDIE', 'JAZZ', 'LATIN', 'METAL', 'OTHER', 'POP', 'PUNK', 'REGGAE', 'RNB', 'ROCK', 'SOUL', 'SOUNDTRACK', 'WORLD'),
    "RELEASE_YEAR" INTEGER NOT NULL,
    "VINYL_IMAGE" CHARACTER VARYING(255),
    "VINYL_TITLE" CHARACTER VARYING(255)
);          
ALTER TABLE "PUBLIC"."VINYLS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_9" PRIMARY KEY("VINYL_ID"); 
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.VINYLS;  
ALTER TABLE "PUBLIC"."USER_VINYLS" ADD CONSTRAINT "PUBLIC"."FKOKWU57SRA6HMY3QIRPF8FYU80" FOREIGN KEY("VINYL_ID") REFERENCES "PUBLIC"."VINYLS"("VINYL_ID") NOCHECK;            
ALTER TABLE "PUBLIC"."USER_WISHLIST" ADD CONSTRAINT "PUBLIC"."FKMN5RAL43FCXSNGSHAG2KS8TQJ" FOREIGN KEY("VINYL_ID") REFERENCES "PUBLIC"."VINYLS"("VINYL_ID") NOCHECK;          
ALTER TABLE "PUBLIC"."USER_VINYLS" ADD CONSTRAINT "PUBLIC"."FKQY7XXIVLTTLWD7K35FCJX2S99" FOREIGN KEY("USER_ID") REFERENCES "PUBLIC"."KORISNICI"("USER_ID") NOCHECK;           
ALTER TABLE "PUBLIC"."USER_WISHLIST" ADD CONSTRAINT "PUBLIC"."FK3J0NSK5H64MUXTCGI2U3QE3LG" FOREIGN KEY("USER_ID") REFERENCES "PUBLIC"."KORISNICI"("USER_ID") NOCHECK;         
